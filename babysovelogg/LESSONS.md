# Babysovelogg — Lessons Learned

## Firefox for Android: `<input type="datetime-local">` is broken
- **Problem:** Tapping the time portion of a `datetime-local` input does nothing in Firefox for Android. Only the date part opens a picker.
- **Fix:** Split into separate `<input type="date">` + `<input type="time">`. Both have working native pickers in Firefox.
- **Note:** Chrome for Android handles `datetime-local` fine. This is a Firefox-specific bug.
- **CSS:** Use a `.datetime-row` flex container with `gap: 8px` for side-by-side layout.

## Background processes die when exec session ends
- **Problem:** Running `node server.js &` or `nohup node server.js &` in an exec call — the process gets killed when the exec session times out/completes.
- **Fix:** Use a **systemd service** for anything that needs to stay running. `nohup` is not enough inside OpenClaw exec sessions.
- **Template:**
```ini
[Unit]
Description=Service name
After=network.target

[Service]
Type=simple
WorkingDirectory=/path/to/app
ExecStart=/usr/bin/node dist/server.js
User=openclaw
Restart=always
RestartSec=5
Environment=PORT=3200

[Install]
WantedBy=multi-user.target
```

## Server binds to 0.0.0.0 by default, but verify with external IP
- **Problem:** `curl http://localhost:3200` works but `curl http://192.168.10.177:3200` does not.
- **Cause:** Process wasn't actually running (killed by exec session ending).
- **Lesson:** Always test with the external IP the user will use, and check `ss -tlnp | grep PORT` to verify the process is alive.

## UI: Avoid duplicate information
- **Problem:** Timer was shown in both the arc center AND a separate "Nap in progress" card below it.
- **Fix:** Pick one location. The arc center is more visually integrated — put timer + edit link there, remove the card.
- **Principle:** On mobile screens, every pixel matters. Review the full viewport before adding new elements.

## UI: Don't make buttons bigger than they need to be
- **Problem:** 180×180px sleep button dominated the mobile viewport.
- **Fix:** 56×56px button in the header row. Still easy to tap, but doesn't waste space.
- **Principle:** Primary actions need to be accessible, not enormous. A header-bar button works fine.

## Port must match UFW rules
- **Problem:** App defaulted to port 3000, but UFW only had 3200 open.
- **Lesson:** Check UFW rules (`sudo ufw status`) when choosing ports, or change the app to match existing rules.

## `dist/` in .gitignore — don't try to commit it
- **Problem:** `git add dist/server.js` failed because dist/ is gitignored.
- **Lesson:** Only commit source files. The build output (dist/) is generated by `npm run build`.
